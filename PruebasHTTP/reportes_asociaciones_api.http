### Variables globales
@baseUrl = http://localhost:8000/api
@contentType = application/json

### Login - Necesario para acceder a reportes
POST {{baseUrl}}/login HTTP/1.1
Content-Type: {{contentType}}

{
    "email": "admin@example.com",
    "password": "password"
}

### TOKEN DE AUTENTICACI√ìN ###
# Reemplaza este token con el obtenido del login
@authToken = 38|v8cSotomvAbh2VdUbjVtDzRaKWxY8CC6PuWfr4aN7cc92b5b

### ====================================== ###
### REPORTES DE ASOCIACIONES - ENDPOINTS ###
### ====================================== ###

### üìä Obtener datos para filtros del reporte
GET {{baseUrl}}/reportes/asociaciones/filtros HTTP/1.1
Accept: {{contentType}}
Authorization: Bearer {{authToken}}

### üëÅÔ∏è Previsualizaci√≥n del reporte - Sin filtros
POST {{baseUrl}}/reportes/asociaciones/preview HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "incluir_estadisticas": true,
    "incluir_graficos": false,
    "orientacion": "portrait"
}

### üëÅÔ∏è Previsualizaci√≥n con filtros b√°sicos
POST {{baseUrl}}/reportes/asociaciones/preview HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_id": 1,
    "estado": true,
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape"
}

### üëÅÔ∏è Previsualizaci√≥n con filtros avanzados
POST {{baseUrl}}/reportes/asociaciones/preview HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_id": 2,
    "municipalidad_nombre": "Cusco",
    "estado": true,
    "fecha_desde": "2024-01-01",
    "fecha_hasta": "2024-12-31",
    "con_emprendedores": true,
    "con_servicios": true,
    "calificacion_minima": 4.0,
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ Generar PDF - Reporte b√°sico
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": false,
    "orientacion": "portrait"
}

### üìÑ PDF con filtro por municipalidad
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_id": 1,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF de asociaciones activas
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "estado": true,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape"
}

### üìÑ PDF de asociaciones inactivas
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "estado": false,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": false,
    "orientacion": "portrait"
}

### üìÑ PDF con filtros de fecha
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "fecha_desde": "2024-01-01",
    "fecha_hasta": "2024-06-30",
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF solo asociaciones con emprendedores
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "con_emprendedores": true,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF solo asociaciones con servicios
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "con_servicios": true,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": false,
    "orientacion": "landscape"
}

### üìÑ PDF con calificaci√≥n m√≠nima
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "calificacion_minima": 4.5,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF por municipalidad espec√≠fica (nombre)
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_nombre": "Pisac",
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF con todos los filtros aplicados
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_id": 3,
    "municipalidad_nombre": "Ollantaytambo",
    "estado": true,
    "fecha_desde": "2024-01-01",
    "fecha_hasta": "2024-12-31",
    "con_emprendedores": true,
    "con_servicios": true,
    "calificacion_minima": 4.0,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### ================================ ###
### CASOS DE PRUEBA DE VALIDACI√ìN ###
### ================================ ###

### ‚ùå Test: Filtros con datos inv√°lidos (fechas incorrectas)
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "fecha_desde": "2024-12-31",
    "fecha_hasta": "2024-01-01",
    "formato": "pdf"
}

### ‚ùå Test: Calificaci√≥n inv√°lida (fuera de rango)
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "calificacion_minima": 6.0,
    "formato": "pdf"
}

### ‚ùå Test: Municipalidad inexistente
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_id": 9999,
    "formato": "pdf"
}

### ‚ùå Test: Orientaci√≥n inv√°lida
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "orientacion": "diagonal",
    "formato": "pdf"
}

### ‚ùå Test: Sin autenticaci√≥n
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}

{
    "formato": "pdf"
}

### ========================== ###
### CASOS DE PRUEBA VARIADOS ###
### ========================== ###

### üìÑ PDF solo con estad√≠sticas (sin datos individuales)
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape"
}

### üìÑ PDF formato apaisado con gr√°ficos
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_nombre": "Machu Picchu",
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape"
}

### üëÅÔ∏è Preview para asociaciones recientes (√∫ltimo trimestre)
POST {{baseUrl}}/reportes/asociaciones/preview HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "fecha_desde": "2024-04-01",
    "fecha_hasta": "2024-06-30",
    "incluir_estadisticas": true,
    "incluir_graficos": false,
    "orientacion": "portrait"
}

### üëÅÔ∏è Preview para asociaciones con alta calificaci√≥n
POST {{baseUrl}}/reportes/asociaciones/preview HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "calificacion_minima": 4.5,
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF de asociaciones activas por municipalidad
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "municipalidad_nombre": "Urubamba",
    "estado": true,
    "con_emprendedores": true,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "portrait"
}

### üìÑ PDF asociaciones con m√°s ingresos mensuales
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "con_servicios": true,
    "calificacion_minima": 4.0,
    "estado": true,
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape"
}

### üëÅÔ∏è Preview comparativo por municipalidades
POST {{baseUrl}}/reportes/asociaciones/preview HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "estado": true,
    "con_emprendedores": true,
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape"
}

### üìÑ PDF resumen ejecutivo (solo estad√≠sticas y gr√°ficos)
POST {{baseUrl}}/reportes/asociaciones/pdf HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{authToken}}

{
    "formato": "pdf",
    "incluir_estadisticas": true,
    "incluir_graficos": true,
    "orientacion": "landscape",
    "solo_resumen": true
}
